{"version":3,"sources":["webpack:///./src/views/role/index.vue?b007","webpack:///src/views/role/index.vue","webpack:///./src/views/role/index.vue?8fbe","webpack:///./src/views/role/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","title","addEditType","visible","addDialogVisible","fullscreen","center","on","update:visible","$event","ref","staticStyle","width","margin","model","addForm","label-width","rules","addFormRules","status-icon","label","prop","clearable","change","getPermissionAttrList","value","callback","$$v","$set","expression","_l","item","key","id","name","type","rows","resize","data","permissionAttrList","props","defaultProps","show-checkbox","node-key","highlight-current","staticClass","slot","click","addEditRoleCancel","_v","addEditRoleConfirm","inline","searchForm","placeholder","input","searchRoleList","searchFormReset","openRoleDialog","border","list","scopedSlots","_u","fn","scope","_s","row","description","systemName","permission","size","operateTime","operator","plain","deleteRole","staticRenderFns","rolevue_type_script_lang_js_","systemAttrList","availSystemAttrList","children","systemId","required","message","trigger","min","max","currentPage","pageSize","total","mounted","getSystemAttrList","getAvailSystemAttrList","methods","_this","$get","urls","then","response","_this2","disableFlag","_this3","_this4","$getLoading","Object","objectSpread","$refs","resetFields","treeRef","setCheckedKeys","permissions","map","bind","_this5","validate","valid","permissionIds","getCheckedKeys","concat","getHalfCheckedKeys","params","$postJsonLoading","addRole","editRole","roleId","_this6","$confirm","confirmButtonText","cancelButtonText","$post","views_rolevue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"static/js/chunk-2d0da705.e7ce281a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-dialog',{attrs:{\"title\":_vm.addEditType === 'add' ? '添加角色' : '编辑角色',\"visible\":_vm.addDialogVisible,\"fullscreen\":\"\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event}}},[_c('el-form',{ref:\"addForm\",staticStyle:{\"width\":\"40%\",\"margin\":\"auto\"},attrs:{\"model\":_vm.addForm,\"label-width\":\"120px\",\"rules\":_vm.addFormRules,\"status-icon\":\"\"}},[_c('el-form-item',{attrs:{\"label\":\"所属系统\",\"prop\":\"systemId\"}},[_c('el-select',{attrs:{\"clearable\":\"\"},on:{\"change\":_vm.getPermissionAttrList},model:{value:(_vm.addForm.systemId),callback:function ($$v) {_vm.$set(_vm.addForm, \"systemId\", $$v)},expression:\"addForm.systemId\"}},_vm._l((_vm.availSystemAttrList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.addForm.name),callback:function ($$v) {_vm.$set(_vm.addForm, \"name\", $$v)},expression:\"addForm.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"描述\",\"prop\":\"description\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":\"5\",\"resize\":\"vertical\"},model:{value:(_vm.addForm.description),callback:function ($$v) {_vm.$set(_vm.addForm, \"description\", $$v)},expression:\"addForm.description\"}})],1),_c('el-form-item',{attrs:{\"label\":\"权限配置\"}},[_c('el-tree',{ref:\"treeRef\",attrs:{\"data\":_vm.permissionAttrList,\"props\":_vm.defaultProps,\"show-checkbox\":\"\",\"node-key\":\"id\",\"highlight-current\":\"\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"default\"},on:{\"click\":_vm.addEditRoleCancel}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addEditRoleConfirm}},[_vm._v(\"确 定\")])],1)],1),_c('el-form',{ref:\"searchForm\",attrs:{\"inline\":true,\"model\":_vm.searchForm}},[_c('el-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"placeholder\":\"名称\"},on:{\"input\":_vm.searchRoleList},model:{value:(_vm.searchForm.name),callback:function ($$v) {_vm.$set(_vm.searchForm, \"name\", $$v)},expression:\"searchForm.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"所属系统\",\"prop\":\"systemId\"}},[_c('el-select',{on:{\"change\":_vm.searchRoleList},model:{value:(_vm.searchForm.systemId),callback:function ($$v) {_vm.$set(_vm.searchForm, \"systemId\", $$v)},expression:\"searchForm.systemId\"}},[_c('el-option',{attrs:{\"label\":\"请选择\",\"value\":\"\"}}),_vm._l((_vm.systemAttrList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})})],2)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.searchRoleList}},[_vm._v(\"查询\")]),_c('el-button',{attrs:{\"type\":\"default\"},on:{\"click\":_vm.searchFormReset}},[_vm._v(\"重置\")]),_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.openRoleDialog('add')}}},[_vm._v(\"添加\")])],1)],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"border\":\"\",\"data\":_vm.list}},[_c('el-table-column',{attrs:{\"label\":\"ID\",\"width\":\"40\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(scope.row.id)+\"\\n      \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"名称\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(scope.row.name)+\"\\n      \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"描述\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(scope.row.description)+\"\\n      \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"所属系统\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(scope.row.systemName)+\"\\n      \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"权限\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((scope.row.permissions),function(permission){return _c('el-tag',{key:permission.id,attrs:{\"size\":\"mini\",\"type\":\"info\"}},[_vm._v(_vm._s(permission.name)+\"\\n        \")])})}}])}),_c('el-table-column',{attrs:{\"label\":\"操作时间\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(scope.row.operateTime)+\"\\n      \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作人\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(scope.row.operator)+\"\\n      \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"plain\":\"\",\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.openRoleDialog('edit', scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"plain\":\"\",\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteRole(scope.row.id)}}},[_vm._v(\"删除\")])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <el-dialog\n      :title=\"addEditType === 'add' ? '添加角色' : '编辑角色'\"\n      :visible.sync=\"addDialogVisible\"\n      fullscreen\n      center>\n      <el-form\n        :model=\"addForm\"\n        label-width=\"120px\"\n        ref=\"addForm\"\n        :rules=\"addFormRules\"\n        status-icon\n        style=\"width: 40%; margin: auto;\">\n        <el-form-item label=\"所属系统\" prop=\"systemId\">\n          <el-select v-model=\"addForm.systemId\" clearable @change=\"getPermissionAttrList\">\n            <el-option v-for=\"item in availSystemAttrList\" :key=\"item.id\" :label=\"item.name\"\n                       :value=\"item.id\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"名称\" prop=\"name\">\n          <el-input v-model=\"addForm.name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"描述\" prop=\"description\">\n          <el-input v-model=\"addForm.description\" type=\"textarea\" rows=\"5\" resize=\"vertical\"></el-input>\n        </el-form-item>\n        <!--添加该角色的权限-->\n        <el-form-item label=\"权限配置\">\n          <el-tree\n            :data=\"permissionAttrList\"\n            :props=\"defaultProps\"\n            show-checkbox\n            node-key=\"id\"\n            ref=\"treeRef\"\n            highlight-current>\n          </el-tree>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"default\" @click=\"addEditRoleCancel\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"addEditRoleConfirm\">确 定</el-button>\n      </div>\n    </el-dialog>\n\n\n    <el-form :inline=\"true\" :model=\"searchForm\" ref=\"searchForm\">\n      <el-form-item label=\"名称\" prop=\"name\">\n        <el-input v-model=\"searchForm.name\" placeholder=\"名称\" @input=\"searchRoleList\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"所属系统\" prop=\"systemId\">\n        <el-select v-model=\"searchForm.systemId\" @change=\"searchRoleList\">\n          <el-option label=\"请选择\" value=\"\"></el-option>\n          <el-option v-for=\"item in systemAttrList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"searchRoleList\">查询</el-button>\n        <el-button type=\"default\" @click=\"searchFormReset\">重置</el-button>\n        <el-button type=\"success\" @click=\"openRoleDialog('add')\">添加</el-button>\n      </el-form-item>\n    </el-form>\n\n\n    <el-table border :data=\"list\" style=\"width: 100%;\">\n      <el-table-column label=\"ID\" width=\"40\">\n        <template slot-scope=\"scope\">\n          {{scope.row.id}}\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"名称\" width=\"180\">\n        <template slot-scope=\"scope\">\n          {{scope.row.name}}\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"描述\" width=\"200\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.description }}\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"所属系统\" width=\"180\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.systemName }}\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"权限\">\n        <template slot-scope=\"scope\">\n          <el-tag v-for=\"permission in scope.row.permissions\"\n                  :key=\"permission.id\"\n                  size=\"mini\" type=\"info\">{{permission.name}}\n          </el-tag>\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"操作时间\" width=\"180\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.operateTime }}\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"操作人\" width=\"100\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.operator }}\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button plain type=\"primary\" size=\"mini\" @click=\"openRoleDialog('edit', scope.row)\">编辑</el-button>\n          <el-button plain type=\"danger\" size=\"mini\" @click=\"deleteRole(scope.row.id)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\n  import urls from '@/utils/urls';\n\n  export default {\n    name: \"Role\",\n    data() {\n      return {\n        systemAttrList: null,\n        availSystemAttrList: null,\n        permissionAttrList: null,\n\n\n        defaultProps: {\n          children: 'children',\n          label: 'name'\n        },\n        addEditType: 'add',\n        addDialogVisible: false,\n        addForm: {\n          systemId: '',\n          name: '',\n          description: ''\n        },\n        addFormRules: {\n          systemId: [\n            {required: true, message: '请选择所属系统', trigger: 'change'},\n          ],\n          name: [\n            {required: true, message: '请输入角色名称', trigger: 'blur'},\n            {min: 2, max: 20, message: '长度在 2 到 20 个字符', trigger: 'blur'}\n          ],\n          description: [\n            {min: 1, max: 50, message: '长度在 1 到 50 个字符', trigger: 'blur'}\n          ]\n        },\n\n\n        searchForm: {\n          name: '',\n          systemId: ''\n        },\n\n        list: null,\n        currentPage: 1,\n        pageSize: 100,\n        total: 1,\n      }\n    },\n    mounted() {\n      this.getSystemAttrList();\n      this.getAvailSystemAttrList();\n      this.searchRoleList();\n    },\n    methods: {\n      getSystemAttrList() {\n        this.$get(urls.getSystemAttrList, null).then((response) => {\n          let {data} = response;\n          this.systemAttrList = data;\n        })\n      },\n      getAvailSystemAttrList() {\n        this.$get(urls.getSystemAttrList, {disableFlag: 0}).then((response) => {\n          let {data} = response;\n          this.availSystemAttrList = data;\n        })\n      },\n      getPermissionAttrList() {\n        this.permissionAttrList = null;\n        let systemId = this.addForm.systemId;\n        if (!systemId) {\n          return;\n        }\n        return this.$get(urls.getPermissionAttrList, {systemId}).then((response) => {\n          let {data} = response;\n          this.permissionAttrList = data;\n        })\n      },\n\n\n      searchRoleList() {\n        this.$getLoading(urls.searchRoleList, {\n          currentPage: this.currentPage,\n          pageSize: this.pageSize,\n          ...this.searchForm\n        }).then((response) => {\n          let {data} = response;\n          this.list = data.list;\n          this.total = data.total;\n        })\n      },\n      searchFormReset() {\n        this.$refs.searchForm.resetFields();\n        this.searchRoleList();\n      },\n\n\n\n      openRoleDialog(type, row) {\n        this.addDialogVisible = true;\n        this.addEditType = type;\n        if (row) {\n          this.addForm = {\n            id: row.id,\n            systemId: row.systemId,\n            name: row.name,\n            description: row.description,\n          };\n          this.getPermissionAttrList().then(function () {\n            // 编辑时，旧的数据\n            this.$refs.treeRef.setCheckedKeys(row.permissions.map(item => item.id));\n          }.bind(this));\n        }\n      },\n      addEditRoleCancel() {\n        this.addDialogVisible = false;\n        this.$refs.addForm.resetFields();\n      },\n      addEditRoleConfirm() {\n        this.$refs.addForm.validate((valid) => {\n          if (valid) {\n            let permissionIds = this.$refs.treeRef.getCheckedKeys().concat(this.$refs.treeRef.getHalfCheckedKeys());\n            let params = {\n              id: this.addForm.id,\n              systemId: this.addForm.systemId,\n              name: this.addForm.name,\n              description: this.addForm.description,\n              permissionIds: permissionIds ? permissionIds : []\n            };\n            this.$postJsonLoading(this.addEditType === 'add' ? urls.addRole : urls.editRole, params).then((response) => {\n              this.addEditRoleCancel();\n              this.searchRoleList();\n            })\n          } else {\n            return false;\n          }\n        });\n      },\n      deleteRole(roleId) {\n        this.$confirm('确定删除该角色？', '警告', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.$post(urls.deleteRole, {roleId}).then((response) => {\n            this.searchRoleList();\n          })\n        });\n      }\n    }\n  }\n</script>\n\n<style scoped lang=\"scss\">\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=574eef3a&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"574eef3a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}